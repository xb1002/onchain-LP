## 思路

目的是要构建一个链上进行 LP 做市的程序

### 要做的事

主要要做的事是通过使用 uniswapV3 进行带有对冲的 LP 做市

#### 其他的一些实用程序

1. 计算在某一定区间上，链上 uniswapV3 的池产生的费用。并估计未来区间的费用/年化收益
   - 模块化。对于给定的池（token1、token2、fee）以及对应的时间尺度下，估计其收益

### 执行流程

1. 先将资金按照预先想要提供的比例进行兑换（链上 swap）
2. 提供流动性
3. 交易所（cex）对冲
4. 循环检验当前价格是否在设定价格区间内，如果不在则退出流动性重新进入流动性（具体执行路径如下）
   1. 调整交易所（cex）对冲数量（可选，如果后续执行步骤时间很短或者池波动比较小）
   2. 先移除流动性再收集费用
   3. 按照预先设定的比率兑换对应的代币
   4. 提供流动性
   5. 调整交易所对冲数量
   6. 进入下一次的循环判断

## 几个需要优化的问题

v3 做市要解决的问题：

1. 如何确定一个最优的价格上下区间（静态对冲）
2. 动态对冲与静态对冲的实际模拟，看哪一个会更好
3. 如何挑选出综合收益率最高的品种
4. uniswapV3 的限价单与交易所的限价单是否能优化手续费，在复杂度提高合适的情况下
